apply plugin: 'com.github.johnrengelman.shadow'

description = "JGiven core module"

dependencies {
    compile project(path: ':jgiven-deps', configuration: 'shadow')
}

shadowJar {
    classifier = ''
}

idea {
    module {
        scopes.COMPILE.plus += [configurations.shadow]

        iml {
            whenMerged { module ->
                    def dep = new org.gradle.plugins.ide.idea.model.ModuleLibrary(
                            [new org.gradle.plugins.ide.idea.model.Path('file://$MODULE_DIR$/../jgiven-deps/build/libs/jgiven-deps.jar')],
                            [], [], [], 'COMPILE')
                    dep.exported = true
                    module.dependencies.add(dep)
            }
        }
    }
}

